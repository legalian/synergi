
{% extends "template.html"%}
{% set active_page = "projectlist" %}
{% block body %}

<style>
	.project {
		background: #EEE;
		margin-top: 40px;
		margin-left: 20%;
		margin-right:20%;
		border-radius: 8px;
	}
	.project ul{

	}
	.project ul li{
		display: inline-block;
		padding: 10px;
		/*border-color: red;border-style: solid;border-width: 2px;*/

	}
	.edit{
		float:right;
	}
	.edit a{
		font-size: 1.5em;
		box-shadow: none !important;
		transition: none;
		text-decoration: none;
		color: inherit;
		line-height: 1.8em;

	}
	.name {
		font-size: 2em;
	}

	.expander{
		float:left;
	}
	.dropdown {
	  position: relative;
	  display: inline-block;
	}

	.dropdown-content {
	  display: none;
	  position: absolute;
	  background-color: #f9f9f9;
	  min-width: 160px;
	  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);
	  padding: 12px 16px;
	  z-index: 1;
	}


</style>

<div id="extra" class="container" data-bind="foreach:results">
	<div class = "project">
		<ul>
			<li class="expander-edit" style=""><a href="">+</a></li>
			<li class = "name">Name</li>
			<li class="edit"><a data-bind="attr:{href:'/editor?projectId='+id}">Edit</a></li>		
		</ul>
		<ul>
			<li><div data-bind="text:name"></div></li>
			<li><div data-bind="text:description"></div></li>
			<li>        <li>
			<li>        <li>
			<li><div data-bind="text:repo"></div><div data-bind="text:branch"></div></li>
		</ul>
	</div>	
</div>

<div id="myModal" class="modal">
	<!-- Modal content -->
	<div class="modal-content">
		<div class="modal-header">
			<span class="close">&times;</span>
			<h2>Import Repo</h2>
		</div>
		<div class="modal-body">
		</div>
		<div class="modal-footer">
		</div>
	</div>
</div>


	


<script>





// var modal = document.getElementById("myModal");
// var span = document.getElementsByClassName("close")[0].onclick = function() {
//   modal.style.display = "none";
// }
// window.onclick = function(event) {
//   if (event.target == modal) {
//     modal.style.display = "none";
//   }
// }




// modal.style.display = "block";








var justice = new AppViewModel();


function AppViewModel() {
	var self =	this;
	self.repos    = ko.observableArray([]);
	self.activerepo = ko.observable(null);
	self.repochoices = ko.computed(function(){
		return self.repos().map(function(item){return item.name})
	})
	self.branches = ko.computed(function(){
		var ind = self.repochoices().indexOf(self.activerepo())
		if (ind == -1) {return []}
		return self.repos()[ind].branches
	})
	self.owner = ko.computed(function(){
		var ind = self.repochoices().indexOf(self.activerepo)
		if (ind == -1) {return null}
		return self.repos()[ind].owner
	});


	self.results  = ko.observableArray([]);


	
	$.ajax("/repos", {
		type: "GET",
		success: function(data){
			self.results(data['res']);
			self.repos(data['openrepos'])
		}
	});



}



ko.applyBindings(justice);

</script>






{% endblock %}


